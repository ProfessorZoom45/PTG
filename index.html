<!DOCTYPE html>
<html lang="en" id="top">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Running Late Dynasty</title>
  <meta name="description" content="Running Late Dynasty — splash with ticker, quick links, and auto-redirect to the newest issue." />
  <meta name="color-scheme" content="dark" />

  <!-- Canonical -->
  <link rel="canonical" href="https://professorzoom45.github.io/PTG/">

  <!-- Social / OG -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Perfect Timing Gaming">
  <meta property="og:title" content="Running Late Dynasty — D1SN">
  <meta property="og:description" content="Week 3 finals, quick links, and auto-redirect to the latest issue.">
  <meta property="og:url" content="https://professorzoom45.github.io/PTG/">
  <!-- Always point share art to Oh.PNG in the root -->
  <meta property="og:image" content="https://professorzoom45.github.io/PTG/Oh.PNG">
  <meta property="og:image:secure_url" content="https://professorzoom45.github.io/PTG/Oh.PNG">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#d5b15b">

  <!-- Icons / PWA -->
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <link rel="icon" href="assets/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.PNG">
  <link rel="manifest" href="assets/site.webmanifest">

  <!-- Warm next pages -->
  <link rel="prefetch" href="issue03.html" as="document" />
  <link rel="prefetch" href="issue04.html" as="document" />
  <link rel="prefetch" href="teamhub.html" as="document" />
  <link rel="prefetch" href="coaches.html" as="document" />
  <link rel="prefetch" href="confbatt.html" as="document" />
  <link rel="prefetch" href="boost.html" as="document" />
  <link rel="preload" as="image" href="Oh.PNG" />

  <style>
    :root{
      --bg:#0b0b0b;--card:#141414;--line:#232323;--text:#e6e6e6;--muted:#a6a6a6;
      --gold:#d5b15b;--accent:#f2d675;
      --chip:#121212;--chip-b:#2a2a2a;
      --btn-a:#1a1a1a;--btn-b:#262626;--btn-glow:#f2d67566
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:var(--gold);text-decoration:none}
    a:focus-visible,.cta-btn:focus-visible,.stay-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px;border-radius:10px}

    /* Ticker */
    .ticker{position:sticky;top:0;z-index:999;background:linear-gradient(90deg,#121212,#181818);border-bottom:1px solid #1f1f1f}
    .ticker .wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:10px;padding:10px 14px}
    .logo-a{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;background:linear-gradient(180deg,#f7e8a5,#d6b458 60%,#a3832c);color:#111;font-weight:900;letter-spacing:.6px;border:1px solid #caae51;box-shadow:0 0 0 2px #3c3210 inset, 0 2px 10px #0008;white-space:nowrap}
    .track{overflow:hidden;flex:1}
    .row{display:inline-flex;gap:28px;align-items:center;white-space:nowrap;animation:marquee 30s linear infinite}
    .row>*{font-weight:900;letter-spacing:.3px;position:relative;padding-right:36px;margin-right:36px}
    .row>*::after{content:"";position:absolute;right:8px;top:50%;transform:translateY(-50%);width:6px;height:24px;background:linear-gradient(180deg,#f7e8a5,#d6b458 60%,#a3832c);border-radius:3px}
    .ticker:hover .row{animation-play-state:paused}
    @keyframes marquee{from{transform:translateX(0)} to{transform:translateX(-50%)}}
    @media (prefers-reduced-motion:reduce){ .row{animation:none !important} }

    /* Splash */
    .splash{min-height:66vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;color:var(--accent);position:relative;padding:18px 14px}
    .splash h1{margin:0 0 8px;font-size:clamp(1.6rem,4.8vw,2.4rem);letter-spacing:.4px}
    .splash-hero{width:min(100%,1100px);max-width:92vw;height:auto;margin:.75rem auto;border-radius:16px;border:1px solid #2a2a2a;box-shadow:0 10px 40px #000a}
    .note{max-width:1100px;margin:8px auto 0;color:var(--muted)}
    .cta-rows{display:grid;gap:10px;margin-top:10px}
    .row-btns{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .cta-btn{border:1px solid #3c3c3c;padding:10px 14px;border-radius:12px;color:#fff;background:linear-gradient(180deg,var(--btn-a),var(--btn-b));box-shadow:0 0 0 2px #000 inset, 0 0 18px var(--btn-glow);font-weight:800;letter-spacing:.2px}
    .stay-btn{border:1px solid var(--chip-b);background:#101010;border-radius:12px;padding:10px 14px;color:#eaeaea;font-weight:800}
    .count{font-variant-numeric:tabular-nums}
  </style>
</head>
<body>

  <!-- Ticker: Week 3 user-vs-user FINALS -->
  <div class="ticker" role="region" aria-label="D1SN headlines">
    <div class="wrap">
      <a href="#top" class="logo-a" title="Home">D1SN</a>
      <div class="track" aria-live="polite">
        <div class="row" id="tickerRow">
          <!-- Live W3 finals (UVU only) -->
          <span><strong>W3 FINAL:</strong> Utah 31–21 vs #1 Alabama — Salt Lake City shakes the poll</span>
          <span><strong>W3 FINAL:</strong> #8 LSU 28–21 at #11 BYU — Tigers take Provo</span>

          <!-- Mirror for seamless scroll -->
          <span aria-hidden="true"><strong>W3 FINAL:</strong> Utah 31–21 vs #1 Alabama — Salt Lake City shakes the poll</span>
          <span aria-hidden="true"><strong>W3 FINAL:</strong> #8 LSU 28–21 at #11 BYU — Tigers take Provo</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Splash -->
  <section class="splash" aria-label="cover">
    <h1>Running Late Dynasty</h1>

    <!-- Hero image: ALWAYS link to Oh.PNG in the root -->
    <a href="Oh.PNG" target="_blank" title="Open cover (Oh.PNG)">
      <img class="splash-hero" src="Oh.PNG" alt="Running Late hero cover" width="1600" height="900" fetchpriority="high" />
    </a>

    <p class="note">
      Auto-redirecting to <strong>latest issue</strong> in <span id="count" class="count" aria-live="polite">9</span>s…
    </p>

    <!-- Buttons (rows) -->
    <div class="cta-rows">
      <!-- Row 1: Issue 01–04 -->
      <div class="row-btns">
        <a class="cta-btn" href="issue01.html" title="Open Issue 01">Issue 01</a>
        <a class="cta-btn" href="issue02.html" title="Open Issue 02">Issue 02</a>
        <a class="cta-btn" href="issue03.html" title="Open Issue 03">Issue 03</a>
        <a class="cta-btn" href="issue04.html" title="Open Issue 04">Issue 04</a>
      </div>

      <!-- Row 2: Team Pages – Schools – Conference Battle -->
      <div class="row-btns">
        <a class="cta-btn" href="teamhub.html" title="Browse Team Pages">Team Pages</a>
        <a class="cta-btn" href="coaches.html" title="Schools Page">Schools</a>
        <a class="cta-btn" href="confbatt.html" title="Conference Battle">Conference Battle</a>
      </div>

      <!-- Row 3: Dynasty Boost + Latest -->
      <div class="row-btns">
        <a class="cta-btn" href="boost.html" title="Dynasty Boost Tracker">Dynasty Boost</a>
        <a class="cta-btn" id="readNow" href="issue03.html" title="Open Latest Issue (detected)">Open Latest Issue</a>
      </div>

      <!-- Row 4: Stay Here (alone) -->
      <div class="row-btns">
        <button class="stay-btn" id="stayBtn" type="button" title="Stay on the splash page">Stay Here</button>
      </div>
    </div>
  </section>

  <script>
    // ---------- Settings ----------
    const STAY_KEY = 'rl_splash_stay';
    const DEFAULT_LATEST = 'issue03.html';     // Fallback if detection fails
    const MAX_ISSUE_SCAN = 12;                 // Scan issue01 → issue12

    // Find the highest existing issueNN.html (up to MAX_ISSUE_SCAN)
    async function detectLatestIssue(){
      let lastOk = null;
      for(let i = 1; i <= MAX_ISSUE_SCAN; i++){
        const n = String(i).padStart(2,'0');
        const href = `issue${n}.html`;
        try{
          const res = await fetch(href + '?chk=' + Date.now(), {cache:'no-store'});
          if(res.ok) lastOk = href; else break;
        }catch(_e){ break; }
      }
      return lastOk || DEFAULT_LATEST;
    }

    // Update "Open Latest Issue" button + countdown target
    let LATEST_HREF = DEFAULT_LATEST;
    (async () => {
      LATEST_HREF = await detectLatestIssue();
      const readNow = document.getElementById('readNow');
      if(readNow) readNow.href = LATEST_HREF;
    })();

    // ---------- Countdown (9s default; ?t= for override; ?stay=1 persists staying) ----------
    (function countdown(){
      const qs = new URLSearchParams(location.search);
      const tParam = parseInt(qs.get('t') || '', 10);
      let t = Number.isFinite(tParam) ? Math.max(0, tParam) : 9;

      if (qs.get('stay') === '1') localStorage.setItem(STAY_KEY, '1');

      const stayed  = localStorage.getItem(STAY_KEY) === '1';
      const countEl = document.getElementById('count');
      const stayBtn = document.getElementById('stayBtn');
      const readNow = document.getElementById('readNow');

      let canceled = stayed;
      if (stayed) countEl.textContent = '—';

      stayBtn.addEventListener('click', () => {
        canceled = true;
        localStorage.setItem(STAY_KEY, '1');
        countEl.textContent = '—';
      });

      readNow.addEventListener('click', () => { canceled = true; });

      const tick = async () => {
        if (canceled) return;
        countEl.textContent = t;
        if (t <= 0) {
          const target = LATEST_HREF || DEFAULT_LATEST;
          location.href = target;
        } else {
          t -= 1;
          setTimeout(tick, 1000);
        }
      };
      if (!canceled) setTimeout(tick, 1000);
    })();

    // ---------- Hero image fallback note ----------
    (function heroFallback(){
      const hero = document.querySelector('.splash-hero');
      if(!hero) return;
      hero.addEventListener('error', ()=>{
        const note = document.createElement('div');
        note.className = 'note';
        note.textContent = '(Hero image unavailable — expected Oh.PNG in the repo root)';
        hero.replaceWith(note);
      });
    })();
  </script>
</body>
</html>