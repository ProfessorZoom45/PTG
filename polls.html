<!DOCTYPE html>
<html lang="en" id="top">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>D1SN — Polls & Power Index (Week 8)</title>
<meta name="description" content="Week 8 snapshot: Media & Coaches polls + Power Index with user teams highlighted (and former users noted). Week 5 & Week 6 results included for records/ratings. Keeps the exact constants that team pages read." />
<meta name="color-scheme" content="dark" />
<link rel="canonical" href="https://professorzoom45.github.io/PTG/">

<style>
:root{
  --bg:#0b0b0b;--card:#141414;--line:#232323;--text:#e6e6e6;--muted:#a6a6a6;
  --gold:#d5b15b;--silver:#c0c0c0;--bronze:#cd7f32;--accent:#f2d675;
  --user:#66e3ff;--former:#ffb366;
  --btn-a:#1a1a1a;--btn-b:#262626;--btn-glow:#f2d67566;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
a{color:var(--accent);text-decoration:none}
.section{max-width:1100px;margin:0 auto;padding:18px 14px}
.card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px}
h1,h2{margin:.2rem 0 .6rem}
.small{color:var(--muted);font-size:.92rem}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #2a2a2a;padding:8px 10px;text-align:left}
.gold{color:var(--gold);font-weight:900}
.silver{color:var(--silver);font-weight:900}
.bronze{color:var(--bronze);font-weight:900}
.badge{display:inline-block;border:1px solid #3a3a3a;background:#111;padding:2px 8px;border-radius:999px;font-size:.78rem;margin-left:8px}
.ubadge{display:inline-block;margin-left:6px;padding:1px 6px;border-radius:999px;border:1px solid #2b2b2b;background:#0e0e0e;font-size:.72rem;letter-spacing:.2px}
.ubadge.user{border-color:#2a3a44;color:var(--user)}
.ubadge.former{border-color:#4a3726;color:var(--former)}
.ticker{position:sticky;top:0;z-index:5;background:linear-gradient(90deg,#121212,#181818);border-bottom:1px solid #1f1f1f}
.ticker .wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:10px;padding:10px 14px;flex-wrap:wrap}
.logo-a{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;background:linear-gradient(180deg,#f7e8a5,#d6b458 60%,#a3832c);color:#111;font-weight:900;letter-spacing:.6px;border:1px solid #caae51;box-shadow:0 0 0 2px #3c3210 inset, 0 2px 10px #0008}
.ticker .track{overflow:hidden;flex:1;min-width:260px}
.ticker .row{display:inline-flex;gap:28px;align-items:center;white-space:nowrap;animation:marquee 30s linear infinite}
.ticker:hover .row{animation-play-state:paused}
.ticker .row>*{font-weight:900;letter-spacing:.3px;position:relative;padding-right:36px;margin-right:36px}
.ticker .row>*::after{content:"";position:absolute;right:8px;top:50%;transform:translateY(-50%);width:6px;height:24px;background:linear-gradient(180deg,#f7e8a5,#d6b458 60%,#a3832c);border-radius:3px}
@keyframes marquee{from{transform:translateX(0)} to{transform:translateX(-50%)}}
.legend{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.legend span{display:inline-flex;align-items:center;gap:6px}
footer{max-width:1100px;margin:20px auto 40px;padding:0 14px;color:#aaa;font-size:.9rem}
</style>
</head>
<body>

<!-- Ticker (includes Top-10 from combined poll) -->
<div class="ticker" role="region" aria-label="D1SN Polls Ticker">
  <div class="wrap">
    <a href="https://professorzoom45.github.io/PTG/" class="logo-a" title="Home (Index)">D1SN</a>
    <div class="track"><div class="row" id="tickerRow"></div></div>
  </div>
</div>

<section class="section">
  <h1>Polls & Power Index</h1>
  <p class="small legend">
    <span><strong>Snapshot:</strong> start of <strong>Week 8</strong> — Week 5 & Week 6 results included.</span>
    <span><strong>Medals:</strong> <span class="gold">1st</span>, <span class="silver">2nd</span>, <span class="bronze">3rd</span></span>
    <span><span class="ubadge user">USER</span> = active user team</span>
    <span><span class="ubadge former">FORMER</span> = former user team</span>
  </p>
</section>

<section class="section" id="power">
  <h2>Power Index <span class="badge">Users Only</span></h2>
  <div class="card">
    <table class="table" id="powerTable">
      <thead><tr><th>#</th><th>Team</th><th>Rating</th><th>Record</th></tr></thead>
      <tbody id="powerBody"></tbody>
    </table>
  </div>
</section>

<section class="section" id="combined">
  <h2>Top-25 — Combined (Media + Coaches)</h2>
  <div class="card">
    <table class="table" id="comboTable">
      <thead>
        <tr><th>#</th><th>Team</th><th>Media</th><th>Coaches</th><th>Record</th></tr>
      </thead>
      <tbody id="comboBody"></tbody>
    </table>
  </div>
</section>

<footer>© D1SN — Running Late Dynasty</footer>

<!-- ===================== DATA & LOGIC (keeps the exact constants/shapes) ===================== -->
<script>
/* ===== ACTIVE / FORMER USERS ===== */
const ACTIVE_USERS = new Set([
  "Alabama","Arizona State","Arkansas","Auburn","BYU","Clemson","Colorado","Delaware","Florida","Florida State",
  "Georgia","Georgia Tech","Illinois","LSU","Michigan","Miami","North Carolina","Notre Dame","Ohio State",
  "Oklahoma","Oregon","Ole Miss","Penn State","SMU","South Carolina","Tennessee","Texas","Texas A&M","Texas Tech",
  "UCLA","Washington"
]);
// Historic/former users (left earlier in season)
const FORMER_USERS = new Set(["Utah","USC","Minnesota","Oklahoma"]); // USC left W5, Minnesota & Utah left W3, Oklahoma left W6

/* ===== YOU ASKED TO KEEP THESE CONSTANTS EXACTLY =====
   Shapes must stay: [rank,"Team",points] and {away:"Team",a:##,home:"Team",h:##}
*/

/* Week 8 — MEDIA POLL */
const MEDIA_POLL = [
  [1,"Miami",1604],[2,"Penn State",1569],[3,"Ohio State",1374],[4,"Washington",1369],[5,"Alabama",1303],
  [6,"Texas",1281],[7,"South Carolina",1230],[8,"LSU",1180],[9,"North Carolina",1130],[10,"Texas Tech",1032],
  [11,"BYU",905],[12,"Florida State",896],[13,"Florida",817],[14,"Colorado",764],[15,"Georgia",664],
  [16,"Michigan",640],[17,"Delaware",629],[18,"Notre Dame",557],[19,"Clemson",539],[20,"Auburn",473],
  [21,"Arizona State",353],[22,"Virginia Tech",292],[23,"SMU",216],[24,"San Jose State",86],[25,"Indiana",68]
];

/* Week 8 — COACHES POLL */
const COACHES_POLL = [
  [1,"Miami",1505],[2,"Penn State",1436],[3,"Ohio State",1366],[4,"Alabama",1259],[5,"Texas",1239],
  [6,"Washington",1223],[7,"South Carolina",1144],[8,"North Carolina",1052],[9,"LSU",1049],[10,"Texas Tech",917],
  [11,"Florida State",895],[12,"BYU",784],[13,"Florida",723],[14,"Michigan",697],[15,"Colorado",693],
  [16,"Georgia",630],[17,"Delaware",579],[18,"Notre Dame",530],[19,"Clemson",503],[20,"Auburn",441],
  [21,"Arizona State",377],[22,"Virginia Tech",321],[23,"SMU",216],[24,"Indiana",90],[25,"San Jose State",64]
];

/* Week 5 — RESULTS (subset you supplied) */
const WEEK5_RESULTS = [
  {away:"Purdue",a:0,home:"Washington",h:49},
  {away:"North Carolina",a:45,home:"Notre Dame",h:20},
  {away:"Oklahoma State",a:24,home:"Texas Tech",h:38},
  {away:"SMU",a:41,home:"Louisville",h:10},
  {away:"Georgia Tech",a:22,home:"Miami",h:48},
  {away:"Tennessee",a:14,home:"Syracuse",h:21},
  {away:"Kansas State",a:7,home:"BYU",h:63}
];

/* Week 6 — RESULTS (transcribed from screenshot) */
const WEEK6_RESULTS = [
  {away:"Washington",a:49,home:"Indiana",h:7},
  {away:"Virginia",a:42,home:"North Carolina",h:35},
  {away:"Tennessee",a:23,home:"Kentucky",h:33},
  {away:"Texas Tech",a:35,home:"UCF",h:24},
  {away:"Minnesota",a:11,home:"Michigan",h:17},
  {away:"Notre Dame",a:21,home:"Miami",h:42},
  {away:"LSU",a:40,home:"Vanderbilt",h:15},
  {away:"Georgia Tech",a:34,home:"Duke",h:3},
  {away:"Louisville",a:3,home:"Florida State",h:31},
  {away:"California",a:20,home:"Clemson",h:25},
  {away:"Utah",a:2,home:"BYU",h:65},
  {away:"Auburn",a:35,home:"Arkansas",h:38}
];

/* ===== Additional past weeks kept for records/ratings context (unchanged) ===== */
const WEEK0_RESULTS=[
  {away:"Florida",a:27,home:"Washington",h:42},
  {away:"USC",a:7,home:"Texas",h:40},
  {away:"Ohio",a:3,home:"Ohio State",h:28},
  {away:"Illinois",a:0,home:"Texas Tech",h:28},
  {away:"Temple",a:20,home:"Penn State",h:57},
  {away:"Iowa",a:7,home:"Alabama",h:42},
  {away:"Indiana",a:24,home:"LSU",h:26},
  {away:"UCLA",a:10,home:"California",h:14},
  {away:"Michigan",a:20,home:"Houston",h:0},
  {away:"Utah",a:56,home:"Utah State",h:31},
  {away:"SMU",a:14,home:"Baylor",h:37},
  {away:"BYU",a:21,home:"Clemson",h:17},
  {away:"Miami",a:63,home:"Central Michigan",h:3}
];
const WEEK1_RESULTS=[
  {away:"Clemson",a:14,home:"LSU",h:31},
  {away:"Texas A&M",a:38,home:"Missouri State",h:3},
  {away:"Texas",a:48,home:"Texas State",h:3},
  {away:"California",a:44,home:"Tennessee",h:47},
  {away:"Arizona State",a:7,home:"South Carolina",h:20},
  {away:"Marshall",a:3,home:"Penn State",h:70},
  {away:"Michigan",a:35,home:"NC State",h:20},
  {away:"Georgia",a:26,home:"Miami",h:38},
  {away:"Florida State",a:38,home:"Ole Miss",h:24},
  {away:"Alabama",a:21,home:"Ohio State",h:14}
];
const WEEK2_RESULTS=[
  {away:"Maryland",a:13,home:"Washington",h:19},
  {away:"UCLA",a:31,home:"Kennesaw State",h:7},
  {away:"Texas Tech",a:43,home:"Oregon State",h:17},
  {away:"Wisconsin",a:9,home:"South Carolina",h:77},
  {away:"Oklahoma",a:10,home:"Michigan",h:24},
  {away:"NC State",a:7,home:"Miami",h:58},
  {away:"USC",a:13,home:"LSU",h:42},
  {away:"BYU",a:66,home:"Utah State",h:3},
  {away:"Auburn",a:17,home:"Army",h:7},
  {away:"Arizona State",a:31,home:"Texas A&M",h:13},
  {away:"Florida State",a:24,home:"Texas",h:21},
  {away:"Tennessee",a:28,home:"Indiana",h:35},
  {away:"Alabama",a:42,home:"California",h:17}
];
const WEEK3_RESULTS=[
  {away:"Washington",a:56,home:"Washington State",h:20},
  {away:"Alabama",a:21,home:"Utah",h:31},
  {away:"Georgia State",a:21,home:"Georgia",h:56},
  {away:"South Carolina",a:41,home:"Missouri",h:10},
  {away:"Buffalo",a:7,home:"Penn State",h:63},
  {away:"Baylor",a:35,home:"Ohio State",h:41},
  {away:"Oregon",a:23,home:"Oregon State",h:10},
  {away:"New Mexico",a:21,home:"Oklahoma",h:28},
  {away:"Miami",a:63,home:"Syracuse",h:17},
  {away:"LSU",a:28,home:"BYU",h:21},
  {away:"Delaware",a:13,home:"Georgia Tech",h:10},
  {away:"Boston College",a:13,home:"Clemson",h:24},
  {away:"Hawai'i",a:14,home:"Arizona State",h:35}
];
const WEEK4_RESULTS=[
  {away:"Illinois",a:0,home:"North Carolina",h:38},
  {away:"Sam Houston",a:6,home:"Texas Tech",h:77},
  {away:"Vanderbilt",a:26,home:"Texas",h:44},
  {away:"Texas A&M",a:0,home:"Tennessee",h:49},
  {away:"Rice",a:14,home:"South Carolina",h:73},
  {away:"Oklahoma",a:0,home:"Ole Miss",h:24},
  {away:"Michigan",a:42,home:"Oregon",h:24},
  {away:"Georgia Tech",a:28,home:"NC State",h:7},
  {away:"Florida State",a:24,home:"Pittsburgh",h:14},
  {away:"Alabama",a:28,home:"LSU",h:24},
  {away:"Houston",a:13,home:"Arizona State",h:21}
];

/* ===== Records & helpers ===== */
const allResults = ()=>[]
  .concat(WEEK0_RESULTS,WEEK1_RESULTS,WEEK2_RESULTS,WEEK3_RESULTS,WEEK4_RESULTS,WEEK5_RESULTS,WEEK6_RESULTS);
const recordMap = (()=>{ const m=new Map(); const add=(t,w)=>{const r=m.get(t)||{w:0,l:0}; r[w?'w':'l']++; m.set(t,r);};
  allResults().forEach(g=>{ const w=g.a>g.h?g.away:g.home; const l=g.a>g.h?g.home:g.away; add(w,true); add(l,false); }); return m; })();

/* ===== Power Index (Elo-style, users only) ===== */
const USER_TEAMS_FOR_ELO = Array.from(ACTIVE_USERS);
function computeElo(){
  const K=24, R=new Map(), getR=t=>R.has(t)?R.get(t):1500, setR=(t,v)=>R.set(t,v);
  USER_TEAMS_FOR_ELO.forEach(t=>setR(t,1500));
  allResults().forEach(g=>{ setR(g.away,getR(g.away)); setR(g.home,getR(g.home)); });
  allResults().forEach(g=>{
    const Ra=getR(g.away), Rb=getR(g.home), Sa=g.a>g.h?1:0, Sb=1-Sa;
    const Ea=1/(1+Math.pow(10,(Rb-Ra)/400)), Eb=1-Ea;
    const margin=Math.max(1, Math.log1p(Math.abs(g.a-g.h))/0.7);
    setR(g.away, Ra + K*margin*(Sa-Ea)); setR(g.home, Rb + K*margin*(Sb-Eb));
  });
  return USER_TEAMS_FOR_ELO.map(t=>{
    const r=Math.round(getR(t)); const rr=recordMap.get(t)||{w:0,l:0};
    return {team:t, rating:r, record:{w:rr.w||0,l:rr.l||0}};
  }).sort((a,b)=> b.rating-a.rating)
    .map((x,i)=>({rank:i+1, ...x, medal: i===0?'gold':i===1?'silver':i===2?'bronze':null}));
}

/* ===== Combined poll (Media + Coaches avg; NR=26) ===== */
function computeCombined(){
  const rec=(t)=>{const r=recordMap.get(t)||{w:0,l:0}; return `${r.w||0}-${r.l||0}`;};
  const mRank=new Map(MEDIA_POLL.map(([rk,t,pts])=>[t,{rk,pts}]));
  const cRank=new Map(COACHES_POLL.map(([rk,t,pts])=>[t,{rk,pts}]));
  const teams=new Set([...mRank.keys(),...cRank.keys()]);
  const combined=[...teams].map(t=>{
    const mr=mRank.get(t)?.rk ?? 26, cr=cRank.get(t)?.rk ?? 26;
    const mp=mRank.get(t)?.pts ?? 0,  cp=cRank.get(t)?.pts ?? 0;
    const avg=(mr+cr)/2;
    return {team:t, media:{rank:mr,pts:mp}, coaches:{rank:cr,pts:cp}, avg, record:rec(t)};
  }).sort((a,b)=> a.avg-b.avg || (b.media.pts+b.coaches.pts)-(a.media.pts+a.coaches.pts))
    .map((x,i)=>({rank:i+1, ...x, medal: i===0?'gold':i===1?'silver':i===2?'bronze':null}));
  return combined;
}

/* ===== Render tables + ticker ===== */
function labelTeam(t){
  const isActive = ACTIVE_USERS.has(t);
  const wasUser  = FORMER_USERS.has(t);
  const name = isActive ? `<strong>${t}</strong>` : t;
  const tag = isActive ? `<span class="ubadge user">USER</span>` : (wasUser ? `<span class="ubadge former">FORMER</span>` : "");
  return `${name}${tag}`;
}
function renderTickerTop10(combined){
  const row=document.getElementById('tickerRow');
  const top10 = combined.slice(0,10).map(r=>`#${r.rank} ${r.team}`);
  row.innerHTML = top10.map(x=>`<span>${x}</span>`).join('');
}

function renderPage(){
  const pi = computeElo();
  const combo = computeCombined();

  // Power Index table (users only)
  document.getElementById('powerBody').innerHTML = pi.map(r=>{
    const decorated = r.medal ? `<span class="${r.medal}">${labelTeam(r.team)}</span>` : labelTeam(r.team);
    return `<tr><td>${r.rank}</td><td>${decorated}</td><td>${r.rating}</td><td>${r.record.w}-${r.record.l}</td></tr>`;
  }).join('');

  // Combined poll table (all ranked teams)
  document.getElementById('comboBody').innerHTML = combo.map(r=>{
    const name = r.medal ? `<span class="${r.medal}">${labelTeam(r.team)}</span>` : labelTeam(r.team);
    const mTxt = r.media.rank<=25?`#${r.media.rank} (${r.media.pts})`:'NR';
    const cTxt = r.coaches.rank<=25?`#${r.coaches.rank} (${r.coaches.pts})`:'NR';
    return `<tr><td>${r.rank}</td><td>${name}</td><td>${mTxt}</td><td>${cTxt}</td><td>${r.record}</td></tr>`;
  }).join('');

  // Ticker
  renderTickerTop10(combo);
}
document.addEventListener('DOMContentLoaded', renderPage);
</script>
</body>
</html>
